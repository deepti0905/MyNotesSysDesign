<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1901px" height="1301px" viewBox="-0.5 -0.5 1901 1301" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2021-11-23T17:10:42.489Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36&quot; etag=&quot;WmBONIhBOzZJ7rHTHMUh&quot; version=&quot;15.8.3&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;4d7Irrrak2ZXhOxJkyJj&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="0" y="10" width="370" height="200" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 0px; margin-left: 5px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 210px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Functional requirements</h1><div>1. str getTinyUrl(longUrl)</div><div>2. str getLongUrl(tinyUrl) --&gt; internal and works with redirection</div><div>3. Ability to delete old or unused url</div><div>4. Hash code length should be 10 chars or so</div><div><br /></div></div></div></div></foreignObject><text x="5" y="12" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">Functional requirements...</text></switch></g><rect x="10" y="200" width="380" height="180" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 372px; height: 1px; padding-top: 190px; margin-left: 15px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 190px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Non Functional Requirements</h1><div>1. Highly Available</div><div>2. Low Latency</div></div></div></div></foreignObject><text x="15" y="202" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">Non Functional Requirements...</text></switch></g><rect x="30" y="360" width="320" height="360" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 312px; height: 1px; padding-top: 350px; margin-left: 35px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 370px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Back of the envelop Calculations( dnt waste lot of time on this)</h1><div>1. Total users of the site - 500 M</div><div>2. Active users 10% -50M</div><div>3. Write requests per day 50*5M</div><div>4. Read requests per day 50*100M</div><div>5. R:W 20:1</div><div>6. Rps = 50*150/24*60*60 --&gt; number won't add much value as we always face spike and low periods in our system </div><div>6. Will do further calculations in some time (TODO)</div></div></div></div></foreignObject><text x="35" y="362" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">Back of the envelop Calculations( dnt waste lot of t...</text></switch></g><rect x="710" y="10" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 25px; margin-left: 711px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Monolith</div></div></div></foreignObject><text x="740" y="29" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Monolith</text></switch></g><path d="M 660 110 L 783.63 110" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 788.88 110 L 781.88 113.5 L 783.63 110 L 781.88 106.5 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="645" cy="87.5" rx="7.5" ry="7.5" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><path d="M 645 95 L 645 120 M 645 100 L 630 100 M 645 100 L 660 100 M 645 120 L 630 140 M 645 120 L 660 140" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 147px; margin-left: 645px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Actor</div></div></div></foreignObject><text x="645" y="159" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Actor</text></switch></g><rect x="790" y="70" width="80" height="80" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 110px; margin-left: 791px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Server</div></div></div></foreignObject><text x="830" y="114" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Server</text></switch></g><rect x="1000" y="50" width="730" height="300" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 722px; height: 1px; padding-top: 40px; margin-left: 1005px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 310px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Monolith</h1><div>1. Server generates hash</div><div>2. Server keeps a hash map of  </div><div>ID(generated from URL)| URL| Tiny URL<br />ID (generated from tinyURL)| ID generated from URL</div><div>3. user asks for getTinyURL</div><div><span style="white-space: pre">	</span>server generates SHA ID from long URL | longURL| tinyURL generated from server's hash function</div><div>4. user puts tiny url</div><div><span style="white-space: pre">	</span>server gets info of the long URL id , retreives long url and does redirection with status as 302 and longURL in the location</div><div><br /></div><div>Pro</div><div>1. simple stateless system</div><div><br /></div><div>Con</div><div>1. What about Scale?</div><div>2. Data not durable</div><div> <br /><br /></div><div><br /></div></div></div></div></foreignObject><text x="1005" y="52" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">Monolith...</text></switch></g><rect x="621" y="350" width="719" height="250" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 711px; height: 1px; padding-top: 340px; margin-left: 626px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 260px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Data Modeling</h1><div>1. Two Tables/DB</div><div>ID1 | long url| tiny url | timestamp --&gt; for future cleanup</div><div><br /></div><div>ID2| ID1 </div><div><br /></div><div>Key Value stores such as DynamoDB, Cassandra can work best--&gt; why ? highly available, scalability is easy just add more nodes</div><div><br /></div><div><br /></div><div>--&gt; I'll come on issues with DB on scale and sharding in some time (TODO)</div><div> </div><div><br /></div></div></div></div></foreignObject><text x="626" y="352" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">Data Modeling...</text></switch></g><ellipse cx="545" cy="777.5" rx="7.5" ry="7.5" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><path d="M 545 785 L 545 810 M 545 790 L 530 790 M 545 790 L 560 790 M 545 810 L 530 830 M 545 810 L 560 830" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 837px; margin-left: 545px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Actor</div></div></div></foreignObject><text x="545" y="849" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Actor</text></switch></g><rect x="820" y="600" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 615px; margin-left: 821px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Scale</div></div></div></foreignObject><text x="850" y="619" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Scale</text></switch></g><rect x="920" y="720" width="80" height="80" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 760px; margin-left: 921px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Write Servers</div></div></div></foreignObject><text x="960" y="764" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Write Servers</text></switch></g><rect x="930" y="730" width="80" height="80" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 770px; margin-left: 931px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Write Servers</div></div></div></foreignObject><text x="970" y="774" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Write Servers</text></switch></g><path d="M 1020 780 L 1160 780 L 1160 877.5 L 1293.63 877.5" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1298.88 877.5 L 1291.88 881 L 1293.63 877.5 L 1291.88 874 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="940" y="740" width="80" height="80" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 780px; margin-left: 941px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Write Servers</div></div></div></foreignObject><text x="980" y="784" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Write Servers</text></switch></g><rect x="920" y="950" width="80" height="80" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 990px; margin-left: 921px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Read Servers</div></div></div></foreignObject><text x="960" y="994" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Read Servers</text></switch></g><rect x="930" y="960" width="80" height="80" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 1000px; margin-left: 931px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Read Servers</div></div></div></foreignObject><text x="970" y="1004" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Read Servers</text></switch></g><path d="M 1020 1010 L 1085 1010 L 1085 995 L 1143.63 995" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1148.88 995 L 1141.88 998.5 L 1143.63 995 L 1141.88 991.5 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="940" y="970" width="80" height="80" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 1010px; margin-left: 941px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Read Servers</div></div></div></foreignObject><text x="980" y="1014" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Read Servers</text></switch></g><rect x="760" y="985" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 58px; height: 1px; padding-top: 1000px; margin-left: 762px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">More read servers to respond to high read volume</div></div></div></foreignObject><text x="762" y="1004" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">More read...</text></switch></g><rect x="930" y="670" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 685px; margin-left: 931px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Less Write Servers</div></div></div></foreignObject><text x="960" y="689" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Less Write...</text></switch></g><path d="M 820 800 L 870 800 L 870 787 L 911.63 787.03" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 916.88 787.04 L 909.88 790.53 L 911.63 787.03 L 909.88 783.53 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 820 800 L 870 800 L 870 1010 L 913.63 1010" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 918.88 1010 L 911.88 1013.5 L 913.63 1010 L 911.88 1006.5 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="740" y="760" width="80" height="80" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 800px; margin-left: 741px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">LB</div></div></div></foreignObject><text x="780" y="804" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">LB</text></switch></g><rect x="1260" y="540" width="490" height="260" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 482px; height: 1px; padding-top: 530px; margin-left: 1265px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 270px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Who should generate the ID<br /><br /></h1><div>1. primary key of the table can be SHA256 --&gt; any server can generate --&gt; hence stateless</div><div>2. tinyURL id can be generated by 1 server --&gt; but it can result in single point of failure</div><div>3. But how to generate the tiny URL ?</div><div><span style="white-space: pre">	</span>--&gt; [a-z,A-Z,0-9] --&gt; 62 chars so its base 62<br /></div><div><span style="white-space: pre">	</span>--&gt; depending on the length of uuid 62^n  id generation are possible<br /></div><div>CRC32 --&gt; 7 chars</div><div>MD5</div><div>SHA-I</div><div>4. Hash collision --&gt; append user id and recompute or append timestamp and then recompute --&gt; you can save the extra string in the DB</div></div></div></div></foreignObject><text x="1265" y="542" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">Who should generate the ID...</text></switch></g><path d="M 1300 865 C 1300 856.72 1313.43 850 1330 850 C 1337.96 850 1345.59 851.58 1351.21 854.39 C 1356.84 857.21 1360 861.02 1360 865 L 1360 915 C 1360 923.28 1346.57 930 1330 930 C 1313.43 930 1300 923.28 1300 915 Z" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1360 865 C 1360 873.28 1346.57 880 1330 880 C 1313.43 880 1300 873.28 1300 865" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 903px; margin-left: 1301px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">DB</div></div></div></foreignObject><text x="1330" y="906" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">DB</text></switch></g><path d="M 1230 975 L 1317 975 L 1316.98 934.37" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1316.98 929.12 L 1320.48 936.12 L 1316.98 934.37 L 1313.48 936.12 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="1150" y="935" width="80" height="80" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 975px; margin-left: 1151px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Cache</div></div></div></foreignObject><text x="1190" y="979" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Cache</text></switch></g><rect x="1335" y="1000" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 1015px; margin-left: 1336px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">To expedite reads</div></div></div></foreignObject><text x="1365" y="1019" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">To expedit...</text></switch></g><path d="M 690 790 L 715 790 L 715 793 L 731.63 793.03" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 736.88 793.04 L 729.88 796.53 L 731.63 793.03 L 729.89 789.53 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="630" y="760" width="60" height="60" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 790px; margin-left: 631px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Gateway</div></div></div></foreignObject><text x="660" y="794" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Gateway</text></switch></g><rect x="630" y="875" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 58px; height: 1px; padding-top: 890px; margin-left: 632px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Ratelimiting to catch malicious users</div></div></div></foreignObject><text x="632" y="894" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">Ratelimiti...</text></switch></g><rect x="870" y="620" width="160" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 635px; margin-left: 871px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Stateless servers hence scalable</div></div></div></foreignObject><text x="950" y="639" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Stateless servers hence sc...</text></switch></g><rect x="1460" y="860" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 875px; margin-left: 1461px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Sharding/Analytics/Consistent Hashing</div></div></div></foreignObject><text x="1490" y="879" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Sharding/A...</text></switch></g><rect x="1090" y="1070" width="220" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 1085px; margin-left: 1091px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Most used Urls can stay here/Redis or mecached</div></div></div></foreignObject><text x="1200" y="1089" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Most used Urls can stay here/Redis o...</text></switch></g><path d="M 545 800 L 623.64 804.63" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 628.88 804.93 L 621.69 808.02 L 623.64 804.63 L 622.1 801.03 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="1160" y="1040" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 1055px; margin-left: 1161px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">LRU</div></div></div></foreignObject><text x="1190" y="1059" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">LRU</text></switch></g><path d="M 1530 1035 L 1445 1035 L 1445 915 L 1366.37 915" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1361.12 915 L 1368.12 911.5 L 1366.37 915 L 1368.12 918.5 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="1530" y="950" width="170" height="170" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 1035px; margin-left: 1531px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: left"><span>Clean up Job runs once a month to clean up ids created 1 year ago or are not used</span></div></div></div></div></foreignObject><text x="1615" y="1039" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Clean up Job runs once a mon...</text></switch></g><rect x="720" y="690" width="140" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 705px; margin-left: 721px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Use Random or round robin algo for redistribution</div></div></div></foreignObject><text x="790" y="709" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">Use Random or round rob...</text></switch></g><rect x="840" y="1180" width="440" height="120" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 432px; height: 1px; padding-top: 1170px; margin-left: 845px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 130px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Catches</h1><div>1. HTTP status 301 implies browser will cache the long url for the tiny url</div><div>2. HTTP status 302 implies server will do the redirection always --&gt; better right, gives more control to the server</div></div></div></div></foreignObject><text x="845" y="1182" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">Catches...</text></switch></g><rect x="1650" y="785" width="250" height="95" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 833px; margin-left: 1652px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">multiple shards how to know where data is stored?<br />1. Range based sharding<br />2. Hash based sharding --&gt; use consistent hashing<br />3. Bloom Filters as a concept to detect if a key exists in a shard</div></div></div></foreignObject><text x="1652" y="836" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">multiple shards how to know where data is...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>